"use strict";angular.module("everythingbuthamnersApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]).provider("$ngCart",function(){this.$get=function(){}}).run(["$rootScope","ngCart","ngCartItem","store",function(a,b,c,d){a.$on("ngCart:change",function(){b.$save()}),angular.isObject(d.get("cart"))?b.$restore(d.get("cart")):b.init()}]),angular.module("everythingbuthamnersApp").controller("MainCtrl",["$scope","$log",function(a,b){b.log("Load Up Our Cart :)"),a.awesomeThings=[{name:"Hamners",desc:"OUT OF STOCK"},{name:"Scew Drivers",desc:"Drive Your Screw"},{name:"Buz Saw",desc:"Saw Your Buzzes"}]}]);var CartControllerFxn=function(a,b){a.ngCart=b};angular.module("everythingbuthamnersApp").controller("CartController",["$scope","ngCart",CartControllerFxn]);var ngCartFxn=function(a,b,c){this.init=function(){this.$cart={shipping:null,tax:null,items:[]}},this.addItem=function(c,d,e,f,g){var h=this.getItemById(c),i=null;"object"==typeof h?this.quantity(h.setQuantity(1,!0)):(i=new b(c,d,e,f,g),this.$cart.items.push(i)),a.$broadcast("ngCart:itemAdded",i),a.$broadcast("ngCart:change",{})},this.getItemById=function(a){var b,c=this.getCart().items;return angular.forEach(c,function(c){c.getId()===a&&(b=c)}),b},this.setShipping=function(a){this.$cart.shipping=a},this.getShipping=function(){return 0===this.getCart().items.length?0:this.getCart().shipping},this.setTax=function(a){this.$cart.tax=a},this.getTax=function(){return this.getSubTotal()/100*this.getCart().tax},this.setCart=function(a){this.$cart=a},this.getCart=function(){return this.$cart},this.getItems=function(){return this.getCart().items},this.totalItems=function(){return this.getCart().items.length},this.getSubTotal=function(){var a=0;return angular.forEach(this.getCart().items,function(b){a+=b.getTotal()}),a},this.totalCost=function(){return this.getSubTotal()+this.getShipping()+this.getTax()},this.removeItem=function(b){this.$cart.items.splice(b,1),a.$broadcast("ngCart:itemRemoved",{}),a.$broadcast("ngCart:change",{})},this.empty=function(){this.$cart.items=[],localStorage.removeItem("cart")},this.$restore=function(a){var c=this;c.init(),c.$cart.shipping=a.shipping,c.$cart.tax=a.tax,angular.forEach(a.items,function(a){c.$cart.items.push(new b(a._id,a._name,a._price,a._quantity,a._data))}),this.$save()},this.$save=function(){return c.set("cart",JSON.stringify(this.getCart()))}};angular.module("everythingbuthamnersApp").service("ngCart",["$rootScope","ngCartItem","store",ngCartFxn]);var ngCartItemFxn=function(a){var b=function(a,b,c,d,e){this.setId(a),this.setName(b),this.setPrice(c),this.setQuantity(d),this.setData(e)};return b.prototype.setId=function(a){a?this._id=a:console.error("An ID must be provided")},b.prototype.getId=function(){return this._id},b.prototype.setName=function(a){a?this._name=a:console.error("A name must be provided")},b.prototype.getName=function(){return this._name},b.prototype.setPrice=function(a){var b=parseFloat(a);b?(0>=b&&console.error("A price must be over 0"),this._price=b):console.error("A price must be provided")},b.prototype.getPrice=function(){return this._price},b.prototype.setQuantity=function(b,c){var d=parseInt(b);d%1===0?(c===!0?this._quantity+=d:this._quantity=d,this._quantity<1&&(this._quantity=1)):(this._quantity=1,console.info("Quantity must be an integer and was defaulted to 1")),a.$broadcast("ngCart:change",{})},b.prototype.getQuantity=function(){return this._quantity},b.prototype.setData=function(a){a&&(this._data=a)},b.prototype.getData=function(){return this._data?this._data:void console.info("This item has no data")},b.prototype.getTotal=function(){return this.getQuantity()*this.getPrice()},b};angular.module("everythingbuthamnersApp").factory("ngCartItem",["$rootScope","store",ngCartItemFxn]);var StoreFxn=function(a){return{get:function(b){if(a.localStorage[b]){var c=angular.fromJson(a.localStorage[b]);return JSON.parse(c)}return!1},set:function(b,c){return void 0===c?a.localStorage.removeItem(b):a.localStorage[b]=angular.toJson(c),a.localStorage[b]}}};angular.module("everythingbuthamnersApp").service("store",["$window",StoreFxn]);var AddToCartFxn=function(a){return{restrict:"E",controller:"CartController",scope:{id:"@",name:"@",quantity:"@",price:"@",data:"="},transclude:!0,templateUrl:"template/ngCart/addtocart.html",link:function(b,c,d){b.attrs=d,b.inCart=function(){return a.getItemById(d.id)}}}};angular.module("everythingbuthamnersApp").directive("addtocart",["ngCart",AddToCartFxn]);var CartFxn=function(){return{restrict:"E",controller:"CartController",scope:{},templateUrl:"template/ngCart/cart.html",link:function(){}}};angular.module("everythingbuthamnersApp").directive("cart",["ngCart",CartFxn]);var SummaryFxn=function(){return{restrict:"E",controller:"CartController",scope:{},transclude:!0,templateUrl:"template/ngCart/summary.html"}};angular.module("everythingbuthamnersApp").directive("summary",["ngCart",SummaryFxn]);